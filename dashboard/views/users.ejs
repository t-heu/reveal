<% if (!user) { %>
  <%- include('header') %>
<% } else { %>
  <%- include('headerLogged', {user, active_side: '2'}) %>
<% } %>

<% if(error && error != "") { %>
  <div class="alert alert-danger alert-dismissible fade show" role="alert">
    <strong>Error</strong>  <%= error %>
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
<% } %>

<% if(success && success != "") { %>
  <div class="alert alert-success alert-dismissible fade show" role="alert">
    <strong>Success</strong>  <%= success %>
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
<% } %>

<% if (user) { %>
  <div class="container">
  <div class="mt-4 nav-tables">
    <a href="/app/user" class="nav active">
      <h2 class="active">
        All users
      </h2>
    </a>

    <% if (user.role === 'admin') { %>
      <a href="/user" class="nav">
        <h2>
          Administrator
        </h2>
      </a>
    <% } %>
  </div>

  <section class="box mt-4" style="overflow-x: auto;">
    <div class="header-table">
      <h1>Users</h1>

      <div class="change">
        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-funnel" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5v-2zm1 .5v1.308l4.372 4.858A.5.5 0 0 1 7 8.5v5.306l2-.666V8.5a.5.5 0 0 1 .128-.334L13.5 3.308V2h-11z"/>
        </svg>
        <p>Filter</p>
      </div>
    </div>

    <table class="table table-striped table-dark">
      <thead>
        <tr>
          <th scope="col">Name</th>
          <th scope="col">Email</th>
          <th scope="col">Password</th>
          <th scope="col">Email Verified</th>
          <th scope="col">Photo</th>
          <th scope="col">Created At</th>
        </tr>
      </thead>

      <tbody>
        <% data.usersData.map(r => { %>
          <tr>
            <td><%= r.name %></td>
            <td><%= r.email %></td>
            <td><%= r.password %></td>
            <td><%= r.emailVerified %></td>
            <td><%= r.photo %></td>
            <td><%= r.createdAt %></td>
          </tr>
        <%  }) %>
      </tbody>
    </table>
  </section>
</div>
<% } %>

<%- include('footer') %>